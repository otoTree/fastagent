<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font-family: Arial, sans-serif; font-size: 24px; font-weight: bold; fill: #2c3e50; }
      .subtitle { font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; fill: #34495e; }
      .text { font-family: Arial, sans-serif; font-size: 12px; fill: #2c3e50; }
      .small-text { font-family: Arial, sans-serif; font-size: 10px; fill: #7f8c8d; }
      .layer-bg { fill: #ecf0f1; stroke: #bdc3c7; stroke-width: 2; rx: 10; }
      .frontend-box { fill: #3498db; stroke: #2980b9; stroke-width: 2; rx: 8; }
      .backend-box { fill: #e74c3c; stroke: #c0392b; stroke-width: 2; rx: 8; }
      .runtime-box { fill: #f39c12; stroke: #e67e22; stroke-width: 2; rx: 8; }
      .database-box { fill: #27ae60; stroke: #229954; stroke-width: 2; rx: 8; }
      .cache-box { fill: #9b59b6; stroke: #8e44ad; stroke-width: 2; rx: 8; }
      .plugin-box { fill: #1abc9c; stroke: #16a085; stroke-width: 2; rx: 8; }
      .white-text { fill: white; }
      .arrow { stroke: #34495e; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .bidirectional { stroke: #34495e; stroke-width: 2; fill: none; marker-end: url(#arrowhead); marker-start: url(#arrowhead); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#34495e" />
    </marker>
  </defs>

  <!-- 标题 -->
  <text x="600" y="30" text-anchor="middle" class="title">FastAgent 系统架构图</text>
  
  <!-- 用户层 -->
  <rect x="50" y="60" width="1100" height="80" class="layer-bg"/>
  <text x="70" y="85" class="subtitle">用户层 (User Layer)</text>
  
  <!-- 浏览器 -->
  <rect x="100" y="100" width="120" height="30" fill="#95a5a6" stroke="#7f8c8d" stroke-width="1" rx="5"/>
  <text x="160" y="120" text-anchor="middle" class="text white-text">Web Browser</text>
  
  <!-- 移动端 -->
  <rect x="250" y="100" width="120" height="30" fill="#95a5a6" stroke="#7f8c8d" stroke-width="1" rx="5"/>
  <text x="310" y="120" text-anchor="middle" class="text white-text">Mobile App</text>
  
  <!-- API客户端 -->
  <rect x="400" y="100" width="120" height="30" fill="#95a5a6" stroke="#7f8c8d" stroke-width="1" rx="5"/>
  <text x="460" y="120" text-anchor="middle" class="text white-text">API Client</text>
  
  <!-- Webhook -->
  <rect x="550" y="100" width="120" height="30" fill="#95a5a6" stroke="#7f8c8d" stroke-width="1" rx="5"/>
  <text x="610" y="120" text-anchor="middle" class="text white-text">Webhook</text>

  <!-- 前端层 -->
  <rect x="50" y="160" width="550" height="180" class="layer-bg"/>
  <text x="70" y="185" class="subtitle">前端层 (Frontend Layer)</text>
  
  <!-- Next.js 应用 -->
  <rect x="100" y="200" width="450" height="120" class="frontend-box"/>
  <text x="325" y="225" text-anchor="middle" class="subtitle white-text">Next.js 应用</text>
  
  <!-- 前端组件 -->
  <rect x="120" y="240" width="100" height="25" fill="#2980b9" rx="3"/>
  <text x="170" y="257" text-anchor="middle" class="small-text white-text">页面组件</text>
  
  <rect x="240" y="240" width="100" height="25" fill="#2980b9" rx="3"/>
  <text x="290" y="257" text-anchor="middle" class="small-text white-text">UI组件库</text>
  
  <rect x="360" y="240" width="100" height="25" fill="#2980b9" rx="3"/>
  <text x="410" y="257" text-anchor="middle" class="small-text white-text">状态管理</text>
  
  <rect x="120" y="275" width="100" height="25" fill="#2980b9" rx="3"/>
  <text x="170" y="292" text-anchor="middle" class="small-text white-text">Agent编辑器</text>
  
  <rect x="240" y="275" width="100" height="25" fill="#2980b9" rx="3"/>
  <text x="290" y="292" text-anchor="middle" class="small-text white-text">项目管理</text>
  
  <rect x="360" y="275" width="100" height="25" fill="#2980b9" rx="3"/>
  <text x="410" y="292" text-anchor="middle" class="small-text white-text">模型配置</text>

  <!-- 技术栈标注 -->
  <text x="580" y="220" class="small-text">技术栈:</text>
  <text x="580" y="235" class="small-text">• Next.js 15</text>
  <text x="580" y="250" class="small-text">• React 19</text>
  <text x="580" y="265" class="small-text">• Shadcn/UI</text>
  <text x="580" y="280" class="small-text">• Zustand</text>
  <text x="580" y="295" class="small-text">• TailwindCSS</text>
  <text x="580" y="310" class="small-text">• TypeScript</text>

  <!-- 后端层 -->
  <rect x="650" y="160" width="500" height="180" class="layer-bg"/>
  <text x="670" y="185" class="subtitle">后端层 (Backend Layer)</text>
  
  <!-- Express API 服务器 -->
  <rect x="700" y="200" width="400" height="120" class="backend-box"/>
  <text x="900" y="225" text-anchor="middle" class="subtitle white-text">Express API 服务器</text>
  
  <!-- 后端模块 -->
  <rect x="720" y="240" width="80" height="25" fill="#c0392b" rx="3"/>
  <text x="760" y="257" text-anchor="middle" class="small-text white-text">路由层</text>
  
  <rect x="810" y="240" width="80" height="25" fill="#c0392b" rx="3"/>
  <text x="850" y="257" text-anchor="middle" class="small-text white-text">中间件</text>
  
  <rect x="900" y="240" width="80" height="25" fill="#c0392b" rx="3"/>
  <text x="940" y="257" text-anchor="middle" class="small-text white-text">数据模型</text>
  
  <rect x="990" y="240" width="80" height="25" fill="#c0392b" rx="3"/>
  <text x="1030" y="257" text-anchor="middle" class="small-text white-text">服务层</text>
  
  <rect x="720" y="275" width="80" height="25" fill="#c0392b" rx="3"/>
  <text x="760" y="292" text-anchor="middle" class="small-text white-text">认证授权</text>
  
  <rect x="810" y="275" width="80" height="25" fill="#c0392b" rx="3"/>
  <text x="850" y="292" text-anchor="middle" class="small-text white-text">Webhook</text>
  
  <rect x="900" y="275" width="80" height="25" fill="#c0392b" rx="3"/>
  <text x="940" y="292" text-anchor="middle" class="small-text white-text">任务队列</text>
  
  <rect x="990" y="275" width="80" height="25" fill="#c0392b" rx="3"/>
  <text x="1030" y="292" text-anchor="middle" class="small-text white-text">Redis服务</text>

  <!-- Agent运行时层 -->
  <rect x="50" y="360" width="550" height="180" class="layer-bg"/>
  <text x="70" y="385" class="subtitle">Agent运行时层 (Agent Runtime Layer)</text>
  
  <!-- Agent Runtime 服务 -->
  <rect x="100" y="400" width="450" height="120" class="runtime-box"/>
  <text x="325" y="425" text-anchor="middle" class="subtitle white-text">Agent Runtime 服务</text>
  
  <!-- Runtime 组件 -->
  <rect x="120" y="440" width="100" height="25" fill="#e67e22" rx="3"/>
  <text x="170" y="457" text-anchor="middle" class="small-text white-text">Agent管理器</text>
  
  <rect x="240" y="440" width="100" height="25" fill="#e67e22" rx="3"/>
  <text x="290" y="457" text-anchor="middle" class="small-text white-text">任务执行器</text>
  
  <rect x="360" y="440" width="100" height="25" fill="#e67e22" rx="3"/>
  <text x="410" y="457" text-anchor="middle" class="small-text white-text">工具服务</text>
  
  <rect x="120" y="475" width="100" height="25" fill="#e67e22" rx="3"/>
  <text x="170" y="492" text-anchor="middle" class="small-text white-text">状态同步</text>
  
  <rect x="240" y="475" width="100" height="25" fill="#e67e22" rx="3"/>
  <text x="290" y="492" text-anchor="middle" class="small-text white-text">心跳监控</text>
  
  <rect x="360" y="475" width="100" height="25" fill="#e67e22" rx="3"/>
  <text x="410" y="492" text-anchor="middle" class="small-text white-text">性能统计</text>

  <!-- 插件系统 -->
  <rect x="650" y="360" width="500" height="180" class="layer-bg"/>
  <text x="670" y="385" class="subtitle">插件系统 (Plugin System)</text>
  
  <!-- FastGPT Plugin -->
  <rect x="700" y="400" width="400" height="120" class="plugin-box"/>
  <text x="900" y="425" text-anchor="middle" class="subtitle white-text">FastGPT Plugin 生态</text>
  
  <!-- 插件组件 -->
  <rect x="720" y="440" width="100" height="25" fill="#16a085" rx="3"/>
  <text x="770" y="457" text-anchor="middle" class="small-text white-text">插件管理</text>
  
  <rect x="840" y="440" width="100" height="25" fill="#16a085" rx="3"/>
  <text x="890" y="457" text-anchor="middle" class="small-text white-text">插件市场</text>
  
  <rect x="960" y="440" width="100" height="25" fill="#16a085" rx="3"/>
  <text x="1010" y="457" text-anchor="middle" class="small-text white-text">插件API</text>
  
  <rect x="720" y="475" width="100" height="25" fill="#16a085" rx="3"/>
  <text x="770" y="492" text-anchor="middle" class="small-text white-text">工具集成</text>
  
  <rect x="840" y="475" width="100" height="25" fill="#16a085" rx="3"/>
  <text x="890" y="492" text-anchor="middle" class="small-text white-text">第三方服务</text>
  
  <rect x="960" y="475" width="100" height="25" fill="#16a085" rx="3"/>
  <text x="1010" y="492" text-anchor="middle" class="small-text white-text">自定义插件</text>

  <!-- 数据层 -->
  <rect x="50" y="560" width="1100" height="180" class="layer-bg"/>
  <text x="70" y="585" class="subtitle">数据层 (Data Layer)</text>
  
  <!-- MongoDB -->
  <rect x="100" y="600" width="300" height="120" class="database-box"/>
  <text x="250" y="625" text-anchor="middle" class="subtitle white-text">MongoDB 数据库</text>
  
  <!-- MongoDB 集合 -->
  <rect x="120" y="645" width="80" height="20" fill="#229954" rx="3"/>
  <text x="160" y="658" text-anchor="middle" class="small-text white-text">用户集合</text>
  
  <rect x="210" y="645" width="80" height="20" fill="#229954" rx="3"/>
  <text x="250" y="658" text-anchor="middle" class="small-text white-text">Agent集合</text>
  
  <rect x="300" y="645" width="80" height="20" fill="#229954" rx="3"/>
  <text x="340" y="658" text-anchor="middle" class="small-text white-text">项目集合</text>
  
  <rect x="120" y="675" width="80" height="20" fill="#229954" rx="3"/>
  <text x="160" y="688" text-anchor="middle" class="small-text white-text">触发器集合</text>
  
  <rect x="210" y="675" width="80" height="20" fill="#229954" rx="3"/>
  <text x="250" y="688" text-anchor="middle" class="small-text white-text">模型配置</text>
  
  <rect x="300" y="675" width="80" height="20" fill="#229954" rx="3"/>
  <text x="340" y="688" text-anchor="middle" class="small-text white-text">执行日志</text>

  <!-- Redis -->
  <rect x="450" y="600" width="300" height="120" class="cache-box"/>
  <text x="600" y="625" text-anchor="middle" class="subtitle white-text">Redis 缓存 &amp; 队列</text>
  
  <!-- Redis 功能 -->
  <rect x="470" y="645" width="80" height="20" fill="#8e44ad" rx="3"/>
  <text x="510" y="658" text-anchor="middle" class="small-text white-text">任务队列</text>
  
  <rect x="560" y="645" width="80" height="20" fill="#8e44ad" rx="3"/>
  <text x="600" y="658" text-anchor="middle" class="small-text white-text">Agent注册</text>
  
  <rect x="650" y="645" width="80" height="20" fill="#8e44ad" rx="3"/>
  <text x="690" y="658" text-anchor="middle" class="small-text white-text">会话缓存</text>
  
  <rect x="470" y="675" width="80" height="20" fill="#8e44ad" rx="3"/>
  <text x="510" y="688" text-anchor="middle" class="small-text white-text">心跳监控</text>
  
  <rect x="560" y="675" width="80" height="20" fill="#8e44ad" rx="3"/>
  <text x="600" y="688" text-anchor="middle" class="small-text white-text">状态同步</text>
  
  <rect x="650" y="675" width="80" height="20" fill="#8e44ad" rx="3"/>
  <text x="690" y="688" text-anchor="middle" class="small-text white-text">性能统计</text>

  <!-- 外部服务 -->
  <rect x="800" y="600" width="300" height="120" fill="#34495e" stroke="#2c3e50" stroke-width="2" rx="8"/>
  <text x="950" y="625" text-anchor="middle" class="subtitle white-text">外部服务</text>
  
  <!-- 外部服务组件 -->
  <rect x="820" y="645" width="80" height="20" fill="#2c3e50" rx="3"/>
  <text x="860" y="658" text-anchor="middle" class="small-text white-text">OpenAI API</text>
  
  <rect x="910" y="645" width="80" height="20" fill="#2c3e50" rx="3"/>
  <text x="950" y="658" text-anchor="middle" class="small-text white-text">Claude API</text>
  
  <rect x="1000" y="645" width="80" height="20" fill="#2c3e50" rx="3"/>
  <text x="1040" y="658" text-anchor="middle" class="small-text white-text">其他LLM</text>
  
  <rect x="820" y="675" width="80" height="20" fill="#2c3e50" rx="3"/>
  <text x="860" y="688" text-anchor="middle" class="small-text white-text">第三方API</text>
  
  <rect x="910" y="675" width="80" height="20" fill="#2c3e50" rx="3"/>
  <text x="950" y="688" text-anchor="middle" class="small-text white-text">Webhook服务</text>
  
  <rect x="1000" y="675" width="80" height="20" fill="#2c3e50" rx="3"/>
  <text x="1040" y="688" text-anchor="middle" class="small-text white-text">监控服务</text>

  <!-- 连接线 -->
  <!-- 用户到前端 -->
  <line x1="160" y1="130" x2="160" y2="200" class="arrow"/>
  <line x1="310" y1="130" x2="310" y2="200" class="arrow"/>
  <line x1="460" y1="130" x2="460" y2="200" class="arrow"/>
  <line x1="610" y1="130" x2="900" y2="200" class="arrow"/>
  
  <!-- 前端到后端 -->
  <line x1="550" y1="260" x2="700" y2="260" class="bidirectional"/>
  
  <!-- 后端到Agent Runtime -->
  <line x1="700" y1="320" x2="550" y2="400" class="bidirectional"/>
  
  <!-- 后端到插件系统 -->
  <line x1="900" y1="320" x2="900" y2="400" class="bidirectional"/>
  
  <!-- Agent Runtime到插件系统 -->
  <line x1="550" y1="460" x2="700" y2="460" class="bidirectional"/>
  
  <!-- 后端到数据库 -->
  <line x1="800" y1="320" x2="250" y2="600" class="bidirectional"/>
  
  <!-- 后端到Redis -->
  <line x1="900" y1="320" x2="600" y2="600" class="bidirectional"/>
  
  <!-- Agent Runtime到Redis -->
  <line x1="325" y1="520" x2="550" y2="600" class="bidirectional"/>
  
  <!-- 插件系统到外部服务 -->
  <line x1="950" y1="520" x2="950" y2="600" class="bidirectional"/>

  <!-- 图例 -->
  <text x="50" y="770" class="subtitle">图例:</text>
  <rect x="120" y="755" width="15" height="15" class="frontend-box"/>
  <text x="145" y="767" class="small-text">前端层</text>
  
  <rect x="200" y="755" width="15" height="15" class="backend-box"/>
  <text x="225" y="767" class="small-text">后端层</text>
  
  <rect x="280" y="755" width="15" height="15" class="runtime-box"/>
  <text x="305" y="767" class="small-text">运行时层</text>
  
  <rect x="380" y="755" width="15" height="15" class="plugin-box"/>
  <text x="405" y="767" class="small-text">插件系统</text>
  
  <rect x="480" y="755" width="15" height="15" class="database-box"/>
  <text x="505" y="767" class="small-text">数据存储</text>
  
  <rect x="580" y="755" width="15" height="15" class="cache-box"/>
  <text x="605" y="767" class="small-text">缓存队列</text>
  
  <line x1="680" y1="762" x2="720" y2="762" class="bidirectional"/>
  <text x="730" y="767" class="small-text">双向通信</text>
  
  <line x1="800" y1="762" x2="840" y2="762" class="arrow"/>
  <text x="850" y="767" class="small-text">单向调用</text>

</svg>